import type { NextApiRequest, NextApiResponse } from "next"

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  if (process.env.NODE_ENV === "development") {
    const { tidewaveHandler } = await import("tidewave/next-js/handler")
    const handler = await tidewaveHandler()
    return handler(req, res)
  } else {
    res.status(404).end()
  }
}

export const config = {
  runtime: "nodejs",
  api: {
    bodyParser: false,
  },
}
